# Git操作まとめ
https://www.youtube.com/watch?v=hUYUld6aEmc

## 余計なファイルを管理外へ
gitの管理から削除（作業ディレクトリには残る）
- git rm --cached <ファイル名>

ファイル履歴から完全削除（過去コミットから消す）
git filter-branch -f --index-filter 'git rm --cached -rf --ignore-unmatch <ファイル名>' HEAD

【意味】
- git filter-branch : 過去のコミット履歴を書き換える
- -f : 強制実行
- --index-filter : 全コミットから該当ファイルを削除

---

## 履歴から機密削除（歴史改変）
- git filter-repo   ※新推奨
- git filter-branch

---

## 直前コミットを戻す（HEAD操作）
- soft：コミットだけ取り消し（変更保持）
  git reset --soft HEAD~1
- mixed：ステージ解除（変更保持）
  git reset HEAD~1
  git reset --mixed HEAD~1
- hard：作業内容ごと巻き戻し（危険）
  git reset --hard HEAD~1

---

## 履歴を残したまま取り消し
git revert <commit>

---

## 作業退避し安全に戻す
git branch <new-branch>
git reset --hard HEAD~1
git switch <new-branch>

---

## 消えたコミット/ブランチ復元
git reflog
git reset --hard <reflog-id>
git branch <name> <reflog-id>

---

## コミットメッセージ修正
git commit --amend

---

## author情報修正
git config user.name "<name>"
git config user.email "<email>"
git commit --amend --author="<name> <email>"

---

## 未コミット作業の退避/復元
git stash
git stash pop

---

## pushミス修正
git push origin :<branch>
git push origin <branch>

---

## HEAD表記の違い（超簡潔まとめ）
- `HEAD~` / `HEAD~1` / `HEAD^` → 基本はすべて「1つ前のコミット」
- `HEAD~2` → 2つ前（さらに過去）
- `HEAD^2` → マージコミットの2番目の親
通常は全部同じ意味で使えるが、マージ時だけ `^2` が分岐側を指す

